!function(n,r){"use strict";var i,s,o=n.YAHOO=n.YAHOO||{},e=o.SP=o.SP||{},l=[];function t(){}t.ATTRS={container:{value:null,setter:r.querySelector.bind(r)},item:{value:null},visibilityFeedbackUrl:{value:null},isScrollableModule:{value:!0},enableResizeListener:{value:null},resizeHeightThreshold:{value:680},resizeObserver:{value:null}},t.prototype={initializer:function(){var e=this,i=e.getInvisibleItems();0<i.length&&(e.set("items",i),e.setEventHandler())},destructor:function(){var e=this.get("resizeObserver");e instanceof ResizeObserver&&e.unobserve()},setEventHandler:function(){var e,i=this,t=i.get("container");o.Event.listen(t,"scroll",i.delayedProcess.bind(i)),o.Event.listen(n,"windowresize",i.process.bind(i)),o.Event.on("containerresize",i.delayedProcess.bind(i),t),i.get("enableResizeListener")&&ResizeObserver&&(e=new ResizeObserver(i.resizeListener.bind(i)),i.set("resizeObserver",e),e.observe(t)),i.isContainerHidden()&&o.Event.listen(r,"scroll",i.delayedProcess.bind(i))},resizeListener:function(e){var i=this;e.forEach(function(e){e.contentRect.height>i.get("resizeHeightThreshold")&&i.delayedProcess()})},getInvisibleItems:function(){var e,i=this,t=[],n=i.get("container");return n&&(e=i.get("item"),0<(n=n.querySelectorAll(e)).length&&n.forEach(function(e){i.isNodeVisible(e)||t.push(e)})),t},delayedProcess:function(){var e=this;i&&clearTimeout(i),i=setTimeout(function(){e.process()},100)},process:function(){var i,t=this;t.get("items").forEach(function(e){"true"!==e.dataset.processed&&t.isNodeVisible(e)&&(e.dataset.processed="true",(i=e.dataset.vf)&&t.addToQueue(i))})},isContainerHidden:function(){var e=this.get("container");return!o.Viewport.inViewport(e)},isNodeVisible:function(e){var i=this.get("container"),i=this.get("isScrollableModule")?o.Viewport.isLeftOfViewport(e)&&o.Viewport.isLeftOfElement(e,i):o.Viewport.elementIsContained(e,i);return i},addToQueue:function(e){var i=this,t=i.get("visibilityFeedbackUrl");-1===l.indexOf(e)&&(l.push(e),s=setTimeout(function(){var e;clearTimeout(s),0<l.length&&(e=t+"&tids="+l.join(","),i.fireBeacon(e)),l=[]},300))},fireBeacon:function(e){var i=new Image;i.onload=i.onerror=function(){i.onload=i.onerror=null,i=null},i.src=e}},e.BingVisibilityFeedback=t}(window,document);